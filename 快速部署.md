# ğŸš€ Cloudflare å¿«é€Ÿéƒ¨ç½²ï¼ˆ5 åˆ†é’Ÿå®Œæˆï¼‰

## ğŸ“ å‡†å¤‡æ¸…å•

åœ¨å¼€å§‹ä¹‹å‰ï¼Œå‡†å¤‡å¥½ä»¥ä¸‹å†…å®¹ï¼š

- [ ] Cloudflare è´¦å·ï¼ˆå…è´¹æ³¨å†Œï¼šhttps://dash.cloudflare.com/sign-upï¼‰
- [ ] æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆè®°äº‹æœ¬ã€VS Code ç­‰ï¼‰
- [ ] æœ¬é¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶

---

## âš¡ å¿«é€Ÿæ­¥éª¤

### ç¬¬ 1 æ­¥ï¼šåˆ›å»ºæ•°æ®åº“ï¼ˆ1 åˆ†é’Ÿï¼‰

1. ç™»å½• https://dash.cloudflare.com/
2. å·¦ä¾§èœå• â†’ **Workers & Pages** â†’ **D1 SQL Database**
3. ç‚¹å‡» **Create database**
4. åç§°è¾“å…¥ï¼š`nav-database`
5. ç‚¹å‡» **Create**
6. è¿›å…¥æ•°æ®åº“ â†’ **Console** æ ‡ç­¾
7. æ‰“å¼€ `cloudflare/schema.sql` æ–‡ä»¶ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹
8. ç²˜è´´åˆ°æ§åˆ¶å°ï¼Œç‚¹å‡» **Execute**
9. **è®°å½•æ•°æ®åº“ ID**ï¼ˆç¨åç”¨ï¼‰

### ç¬¬ 2 æ­¥ï¼šéƒ¨ç½² APIï¼ˆ2 åˆ†é’Ÿï¼‰

1. åœ¨ Cloudflare Dashboardï¼Œ**Workers & Pages** â†’ **Create** â†’ **Create Worker**
2. åç§°è¾“å…¥ï¼š`nav-api`
3. ç‚¹å‡» **Deploy**
4. ç‚¹å‡» **Edit code**
5. æ‰“å¼€ `cloudflare/src/index.js` æ–‡ä»¶ï¼Œå¤åˆ¶å…¨éƒ¨å†…å®¹
6. ç²˜è´´åˆ°ç¼–è¾‘å™¨ï¼Œç‚¹å‡»å³ä¸Šè§’ **Save and deploy**
7. è¿”å› Worker é¡µé¢ â†’ **Settings** â†’ **Bindings** â†’ **Add binding**
8. é€‰æ‹© **D1 database**ï¼š
   - Variable name: `DB`
   - D1 database: é€‰æ‹© `nav-database`
9. ç‚¹å‡» **Save**
10. **è®°å½• Worker URL**ï¼ˆä¾‹å¦‚ï¼š`https://nav-api.xxx.workers.dev`ï¼‰

### ç¬¬ 3 æ­¥ï¼šä¿®æ”¹å‰ç«¯ï¼ˆ30 ç§’ï¼‰

1. ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ `nav.html`
2. æŒ‰ `Ctrl+F` æœç´¢ï¼š`API_BASE_URL`
3. æ‰¾åˆ°ç¬¬ 446 è¡Œå·¦å³ï¼š
```javascript
const API_BASE_URL = window.location.origin + '/api';
```
4. ä¿®æ”¹ä¸ºï¼ˆæ›¿æ¢æˆä½ çš„ Worker URLï¼‰ï¼š
```javascript
const API_BASE_URL = 'https://nav-api.xxx.workers.dev/api';
```
5. ä¿å­˜æ–‡ä»¶

### ç¬¬ 4 æ­¥ï¼šéƒ¨ç½²å‰ç«¯ï¼ˆ1 åˆ†é’Ÿï¼‰

#### æ–¹å¼ Aï¼šç›´æ¥ä¸Šä¼ ï¼ˆæœ€å¿«ï¼‰

1. **Workers & Pages** â†’ **Create** â†’ **Pages** â†’ **Upload assets**
2. é¡¹ç›®åç§°ï¼š`my-nav`
3. ç‚¹å‡» **Create project**
4. æ‹–å…¥æ–‡ä»¶ï¼š`nav.html`ã€`robots.txt`ã€`sitemap.xml`
5. ç‚¹å‡» **Deploy site**
6. å®Œæˆï¼è®°å½•ç½‘ç«™åœ°å€

#### æ–¹å¼ Bï¼šé€šè¿‡ GitHubï¼ˆæ¨èï¼‰

1. å°†é¡¹ç›®ä¸Šä¼ åˆ° GitHub
2. **Workers & Pages** â†’ **Create** â†’ **Pages** â†’ **Connect to Git**
3. é€‰æ‹© GitHub ä»“åº“
4. Build settings ç•™ç©ºï¼Œç‚¹å‡» **Deploy**
5. å®Œæˆï¼è‡ªåŠ¨éƒ¨ç½²

---

## âœ… æµ‹è¯•

1. è®¿é—®ä½ çš„ Pages åœ°å€ï¼ˆä¾‹å¦‚ï¼š`https://my-nav.pages.dev`ï¼‰
2. ç‚¹å‡»å³ä¸Šè§’ âš™ï¸ å›¾æ ‡
3. è¾“å…¥å¯†ç ï¼š`admin123`
4. å°è¯•æ·»åŠ ç½‘ç«™
5. åˆ·æ–°é¡µé¢ï¼Œæ•°æ®åº”è¯¥ä¿å­˜äº†

---

## ğŸ”§ å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šAPI é”™è¯¯ / æ— æ³•åŠ è½½

**åŸå› **ï¼šAPI åœ°å€é…ç½®é”™è¯¯æˆ–æ•°æ®åº“æœªç»‘å®š

**è§£å†³**ï¼š
1. æ£€æŸ¥ `nav.html` ä¸­çš„ `API_BASE_URL` æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ Worker å·²ç»‘å®š D1 æ•°æ®åº“ï¼ˆVariable name å¿…é¡»æ˜¯ `DB`ï¼‰
3. æµè§ˆå™¨æŒ‰ F12 æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### é—®é¢˜ 2ï¼šæ— æ³•ç¼–è¾‘ / å¯†ç é”™è¯¯

**åŸå› **ï¼šæ•°æ®åº“æœªæ­£ç¡®åˆå§‹åŒ–

**è§£å†³**ï¼š
1. è¿›å…¥ D1 æ•°æ®åº“ â†’ **Console**
2. æ‰§è¡Œï¼š`SELECT * FROM settings;`
3. ç¡®è®¤æœ‰ `admin_password` è®°å½•
4. å¦‚æœæ²¡æœ‰ï¼Œé‡æ–°æ‰§è¡Œ `schema.sql`

### é—®é¢˜ 3ï¼šç½‘ç«™ç©ºç™½ / æ— æ³•è®¿é—®

**åŸå› **ï¼šæ–‡ä»¶ä¸Šä¼ æœ‰é—®é¢˜

**è§£å†³**ï¼š
1. ç¡®è®¤ `nav.html`ã€`robots.txt`ã€`sitemap.xml` éƒ½å·²ä¸Šä¼ 
2. åœ¨ Pages è®¾ç½®ä¸­æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
3. æŸ¥çœ‹ Pages éƒ¨ç½²æ—¥å¿—

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

å¦‚éœ€æ›´è¯¦ç»†çš„è¯´æ˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- [Cloudflareç½‘é¡µéƒ¨ç½²æŒ‡å—.md](./Cloudflareç½‘é¡µéƒ¨ç½²æŒ‡å—.md) - å®Œæ•´å›¾æ–‡æ•™ç¨‹
- [cloudflare/README.md](./cloudflare/README.md) - æŠ€æœ¯æ–‡æ¡£

---

## ğŸ¯ ä¸‹ä¸€æ­¥

âœ… ä¿®æ”¹é»˜è®¤å¯†ç ï¼šè®¾ç½® â†’ ä¿®æ”¹å¯†ç 
âœ… è‡ªå®šä¹‰åŸŸåï¼šPages è®¾ç½® â†’ Custom domains
âœ… æ·»åŠ ä½ çš„ç½‘ç«™ï¼šå¼€å¯ç¼–è¾‘æ¨¡å¼ â†’ æ·»åŠ ç½‘ç«™

**éƒ¨ç½²å®Œæˆï¼äº«å—ä½ çš„å…¨çƒé«˜é€Ÿå¯¼èˆªç½‘ç«™å§ï¼** ğŸ‰

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- åŸºæœ¬ SEO Meta æ ‡ç­¾ -->
    <title>æˆ‘çš„å¯¼èˆªç½‘ - ç²¾é€‰ç½‘ç«™å¯¼èˆª | ä¼˜è´¨ç½‘ç«™æ¨è</title>
    <meta name="description" content="æˆ‘çš„å¯¼èˆªç½‘æ˜¯ä¸€ä¸ªç²¾å¿ƒæ•´ç†çš„ç½‘ç«™å¯¼èˆªå¹³å°ï¼Œæ”¶å½•äº†æœç´¢å¼•æ“ã€ç¤¾äº¤åª’ä½“ã€è§†é¢‘ç½‘ç«™ã€è´­ç‰©å¹³å°ã€å¼€å‘å·¥å…·ç­‰ä¼˜è´¨ç½‘ç«™ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€çš„åœ¨çº¿èµ„æºã€‚">
    <meta name="keywords" content="ç½‘ç«™å¯¼èˆª,ç½‘å€å¯¼èˆª,ç½‘å€å¤§å…¨,å¸¸ç”¨ç½‘ç«™,æœç´¢å¼•æ“,ç¤¾äº¤åª’ä½“,è§†é¢‘ç½‘ç«™,è´­ç‰©ç½‘ç«™,å¼€å‘å·¥å…·,å¯¼èˆªç½‘ç«™">
    <meta name="author" content="æˆ‘çš„å¯¼èˆªç½‘">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="bingbot" content="index, follow">

    <!-- ç½‘ç«™å›¾æ ‡ -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

    <!-- è§„èŒƒé“¾æ¥ -->
    <link rel="canonical" href="https://www.yournavsite.com/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.yournavsite.com/">
    <meta property="og:title" content="æˆ‘çš„å¯¼èˆªç½‘ - ç²¾é€‰ç½‘ç«™å¯¼èˆª">
    <meta property="og:description" content="ç²¾å¿ƒæ•´ç†çš„ç½‘ç«™å¯¼èˆªå¹³å°ï¼Œæ”¶å½•æœç´¢å¼•æ“ã€ç¤¾äº¤åª’ä½“ã€è§†é¢‘ç½‘ç«™ã€è´­ç‰©å¹³å°ã€å¼€å‘å·¥å…·ç­‰ä¼˜è´¨ç½‘ç«™ã€‚">
    <meta property="og:image" content="https://www.yournavsite.com/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="zh_CN">
    <meta property="og:site_name" content="æˆ‘çš„å¯¼èˆªç½‘">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://www.yournavsite.com/">
    <meta name="twitter:title" content="æˆ‘çš„å¯¼èˆªç½‘ - ç²¾é€‰ç½‘ç«™å¯¼èˆª">
    <meta name="twitter:description" content="ç²¾å¿ƒæ•´ç†çš„ç½‘ç«™å¯¼èˆªå¹³å°ï¼Œæ”¶å½•æœç´¢å¼•æ“ã€ç¤¾äº¤åª’ä½“ã€è§†é¢‘ç½‘ç«™ã€è´­ç‰©å¹³å°ã€å¼€å‘å·¥å…·ç­‰ä¼˜è´¨ç½‘ç«™ã€‚">
    <meta name="twitter:image" content="https://www.yournavsite.com/og-image.jpg">

    <!-- ç§»åŠ¨è®¾å¤‡ä¼˜åŒ– -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="å¯¼èˆªç½‘">
    <meta name="theme-color" content="#3b82f6">

    <!-- é˜²æ­¢æœç´¢å¼•æ“ç¼“å­˜æ•æ„Ÿä¿¡æ¯ -->
    <meta name="referrer" content="no-referrer-when-downgrade">

    <!-- ç™¾åº¦æœç´¢èµ„æºå¹³å° -->
    <meta name="baidu-site-verification" content="your-baidu-verification-code">

    <!-- Google Search Console -->
    <meta name="google-site-verification" content="your-google-verification-code">

    <!-- å¿…åº”ç½‘ç«™ç®¡ç†å‘˜ -->
    <meta name="msvalidate.01" content="your-bing-verification-code">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Favicon å®¹å™¨æ ·å¼ */
        .site-link:hover .favicon-fallback {
            background: white !important;
            color: #3b82f6 !important;
        }

        /* å›¾æ ‡åœ†è§’ä¼˜åŒ– */
        .favicon-img {
            border: 1px solid rgba(0,0,0,0.05);
        }

        /* æœç´¢é«˜äº®æ ·å¼ */
        mark {
            background-color: #fef08a;
            padding: 0 0.25rem;
            border-radius: 0.25rem;
        }

        .site-link:hover mark {
            background-color: #fde047;
            color: inherit;
        }

        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ - é€‚ç”¨äºç°ä»£æµè§ˆå™¨ */
        .scrollbar-thin::-webkit-scrollbar {
            width: 6px;
        }

        .scrollbar-thin::-webkit-scrollbar-track {
            background: transparent;
            border-radius: 3px;
        }

        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 3px;
            transition: background 0.2s;
        }

        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }

        /* Firefox æ»šåŠ¨æ¡æ ·å¼ */
        .scrollbar-thin {
            scrollbar-width: thin;
            scrollbar-color: #d1d5db transparent;
        }

        /* ä¾§è¾¹æ æ¿€æ´»é“¾æ¥æ ·å¼ */
        #sidebar a.active {
            background-color: #eff6ff;
            color: #2563eb;
            font-weight: 500;
        }

        /* å¹³æ»‘æ»šåŠ¨ */
        html {
            scroll-behavior: smooth;
        }

        /* ç¡®ä¿ä¾§è¾¹æ å›ºå®šå®šä½æ­£ç¡® */
        #sidebar {
            max-height: calc(100vh - 4rem);
            transition: top 0.3s ease-in-out, max-height 0.3s ease-in-out;
        }

        /* å½“å¯¼èˆªæ éšè—æ—¶ï¼Œä¾§è¾¹æ æ‰©å±•åˆ°é¡¶éƒ¨ */
        #sidebar.header-hidden {
            top: 0 !important;
            max-height: 100vh;
        }

        /* é˜²æ­¢bodyæ»šåŠ¨æ—¶ä¾§è¾¹æ æŠ–åŠ¨ */
        body {
            overflow-x: hidden;
        }
    </style>

    <!-- ç»“æ„åŒ–æ•°æ® (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "æˆ‘çš„å¯¼èˆªç½‘",
        "alternateName": "å¯¼èˆªç½‘ç«™",
        "url": "https://www.yournavsite.com/",
        "description": "ç²¾å¿ƒæ•´ç†çš„ç½‘ç«™å¯¼èˆªå¹³å°ï¼Œæ”¶å½•æœç´¢å¼•æ“ã€ç¤¾äº¤åª’ä½“ã€è§†é¢‘ç½‘ç«™ã€è´­ç‰©å¹³å°ã€å¼€å‘å·¥å…·ç­‰ä¼˜è´¨ç½‘ç«™ã€‚",
        "inLanguage": "zh-CN",
        "potentialAction": {
            "@type": "SearchAction",
            "target": {
                "@type": "EntryPoint",
                "urlTemplate": "https://www.yournavsite.com/?q={search_term_string}"
            },
            "query-input": "required name=search_term_string"
        },
        "publisher": {
            "@type": "Organization",
            "name": "æˆ‘çš„å¯¼èˆªç½‘",
            "logo": {
                "@type": "ImageObject",
                "url": "https://www.yournavsite.com/logo.png"
            }
        }
    }
    </script>

    <!-- é¢åŒ…å±‘å¯¼èˆªç»“æ„åŒ–æ•°æ® -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
            "@type": "ListItem",
            "position": 1,
            "name": "é¦–é¡µ",
            "item": "https://www.yournavsite.com/"
        }]
    }
    </script>

    <!-- Google Analytics (æ›¿æ¢ä¸ºä½ çš„è·Ÿè¸ªID) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX');
    </script>

    <!-- ç™¾åº¦ç»Ÿè®¡ (æ›¿æ¢ä¸ºä½ çš„ç»Ÿè®¡ä»£ç ) -->
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?your-baidu-analytics-id";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>
<body class="bg-gray-100">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header id="header" class="fixed top-0 left-0 right-0 bg-white shadow-md z-50 transition-transform duration-300">
        <div class="flex items-center justify-between px-4 py-4 lg:px-8">
            <!-- èœå•æŒ‰é’® -->
            <button id="menuBtn" class="p-2 hover:bg-gray-100 rounded-lg transition lg:hidden">
                <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>

            <!-- æ ‡é¢˜ -->
            <h1 class="text-2xl lg:text-3xl font-bold text-gray-800 flex-1 text-center lg:text-left">æˆ‘çš„å¯¼èˆªç½‘</h1>

            <!-- æ·»åŠ ç½‘ç«™æŒ‰é’® -->
            <button id="addSiteBtn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm lg:text-base">
                <span class="hidden sm:inline">+ æ·»åŠ </span>
                <span class="sm:hidden">+</span>
            </button>
        </div>
    </header>

    <!-- æ·»åŠ /ç¼–è¾‘ç½‘ç«™æ¨¡æ€æ¡† -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
            <h3 id="modalTitle" class="text-xl font-bold text-gray-800 mb-4">æ·»åŠ æ–°ç½‘ç«™</h3>
            <form id="siteForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ç½‘ç«™åç§°</label>
                    <input type="text" id="siteName" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ä¾‹å¦‚ï¼šç™¾åº¦">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ç½‘ç«™åœ°å€</label>
                    <input type="url" id="siteUrl" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="https://www.example.com">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">åˆ†ç±»</label>
                    <select id="siteCategory" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="search">æœç´¢å¼•æ“</option>
                        <option value="social">ç¤¾äº¤åª’ä½“</option>
                        <option value="video">è§†é¢‘ç½‘ç«™</option>
                        <option value="shopping">è´­ç‰©ç½‘ç«™</option>
                        <option value="dev">å¼€å‘å·¥å…·</option>
                    </select>
                </div>
                <div class="flex justify-end gap-2 pt-2">
                    <button type="button" id="cancelBtn" class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition">å–æ¶ˆ</button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">ä¿å­˜</button>
                </div>
            </form>
        </div>
    </div>

    <!-- è®¾ç½®æ¨¡æ€æ¡† -->
    <div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">è®¾ç½®</h3>

            <!-- å¯†ç éªŒè¯ -->
            <div id="passwordAuth" class="space-y-4">
                <p class="text-sm text-gray-600">è¯·è¾“å…¥å¯†ç ä»¥è¿›å…¥ç¼–è¾‘æ¨¡å¼</p>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">å¯†ç </label>
                    <input type="password" id="authPassword" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="è¾“å…¥å¯†ç ">
                    <p id="authError" class="text-sm text-red-600 mt-1 hidden">å¯†ç é”™è¯¯</p>
                </div>
                <div class="flex justify-end gap-2">
                    <button type="button" id="cancelSettingsBtn" class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition">å–æ¶ˆ</button>
                    <button type="button" id="verifyPasswordBtn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">ç¡®è®¤</button>
                </div>
            </div>

            <!-- è®¾ç½®é¢æ¿ -->
            <div id="settingsPanel" class="space-y-4 hidden">
                <div class="space-y-2">
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <span class="text-sm font-medium text-gray-700">ç¼–è¾‘æ¨¡å¼</span>
                        <span class="text-sm text-green-600">å·²å¯ç”¨</span>
                    </div>

                    <button id="changePasswordBtn" class="w-full px-4 py-2 text-left text-gray-700 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                        ä¿®æ”¹å¯†ç 
                    </button>

                    <button id="exitEditModeBtn" class="w-full px-4 py-2 text-left text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition">
                        é€€å‡ºç¼–è¾‘æ¨¡å¼
                    </button>
                </div>
            </div>

            <!-- ä¿®æ”¹å¯†ç é¢æ¿ -->
            <div id="changePasswordPanel" class="space-y-4 hidden">
                <button id="backToSettingsBtn" class="text-blue-600 hover:text-blue-700 text-sm flex items-center gap-1">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    è¿”å›
                </button>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">å½“å‰å¯†ç </label>
                    <input type="password" id="currentPassword" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">æ–°å¯†ç </label>
                    <input type="password" id="newPassword" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">ç¡®è®¤æ–°å¯†ç </label>
                    <input type="password" id="confirmPassword" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
                <p id="passwordError" class="text-sm text-red-600 hidden"></p>
                <div class="flex justify-end gap-2">
                    <button type="button" id="cancelChangePasswordBtn" class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition">å–æ¶ˆ</button>
                    <button type="button" id="savePasswordBtn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">ä¿å­˜</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ç§»åŠ¨ç«¯é®ç½©å±‚ -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden lg:hidden"></div>

    <div class="flex pt-16 lg:pt-16">
        <!-- ä¾§è¾¹æ  -->
        <aside id="sidebar" class="fixed lg:fixed top-16 bottom-0 left-0 z-40 w-64 bg-white shadow-lg transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out flex flex-col">
            <!-- ä¾§è¾¹æ å¤´éƒ¨ - å›ºå®š -->
            <div class="p-6 pb-3 flex-shrink-0 border-b border-gray-100 lg:border-0">
                <h2 class="text-xl font-bold text-gray-800 hidden lg:block">å¯¼èˆªåˆ†ç±»</h2>
                <!-- ç§»åŠ¨ç«¯æ˜¾ç¤ºæ ‡é¢˜ -->
                <h2 class="text-xl font-bold text-gray-800 lg:hidden">å¯¼èˆªåˆ†ç±»</h2>
            </div>

            <!-- å¯¼èˆªé“¾æ¥åŒºåŸŸ - å¯æ»šåŠ¨ -->
            <nav class="flex-1 overflow-y-auto px-6 py-4 space-y-2 scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent min-h-0">
                <a href="#search" class="block px-4 py-3 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition">ğŸ” æœç´¢å¼•æ“</a>
                <a href="#social" class="block px-4 py-3 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition">ğŸ’¬ ç¤¾äº¤åª’ä½“</a>
                <a href="#video" class="block px-4 py-3 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition">ğŸ¬ è§†é¢‘ç½‘ç«™</a>
                <a href="#shopping" class="block px-4 py-3 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition">ğŸ›’ è´­ç‰©ç½‘ç«™</a>
                <a href="#dev" class="block px-4 py-3 text-gray-700 rounded-lg hover:bg-blue-50 hover:text-blue-600 transition">ğŸ’» å¼€å‘å·¥å…·</a>
            </nav>

            <!-- è®¾ç½®æŒ‰é’® - å›ºå®šåœ¨åº•éƒ¨ -->
            <div class="flex-shrink-0 border-t border-gray-200 p-4 bg-white shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]">
                <button id="settingsBtn" class="w-full px-4 py-3 text-gray-700 rounded-lg hover:bg-gray-100 transition flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    <span>è®¾ç½®</span>
                    <span id="editModeIndicator" class="ml-auto hidden">
                        <span class="w-2 h-2 bg-green-500 rounded-full inline-block"></span>
                    </span>
                </button>
            </div>
        </aside>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="flex-1 p-4 lg:p-8 lg:ml-64">
            <div class="max-w-6xl mx-auto">
                <!-- ç«™å†…æœç´¢ -->
                <div class="mb-6">
                    <div class="relative max-w-2xl mx-auto">
                        <input
                            type="text"
                            id="searchInput"
                            placeholder="æœç´¢ç½‘ç«™..."
                            class="w-full px-4 py-3 pl-12 pr-10 bg-white rounded-lg shadow-md border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition"
                        >
                        <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <button id="clearSearch" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition hidden">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <!-- æœç´¢ç»“æœç»Ÿè®¡ -->
                    <div id="searchStats" class="text-center mt-2 text-sm text-gray-600 hidden"></div>
                </div>

                <!-- æ— æœç´¢ç»“æœæç¤º -->
                <div id="noResults" class="hidden text-center py-12">
                    <svg class="w-16 h-16 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <p class="text-gray-500 text-lg">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ç½‘ç«™</p>
                    <p class="text-gray-400 text-sm mt-2">å°è¯•ä½¿ç”¨å…¶ä»–å…³é”®è¯</p>
                </div>

                <!-- ç½‘ç«™åˆ†ç±»åˆ—è¡¨ -->
                <div id="categoriesContainer">
                <!-- æœç´¢å¼•æ“ -->
                <section id="search" class="bg-white rounded-lg shadow-md p-6 mb-6 category-section" data-category="search">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4 pb-2 border-b-2 border-blue-500">æœç´¢å¼•æ“</h2>
                    <div id="search-links" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
                        <!-- ç½‘ç«™é“¾æ¥å°†é€šè¿‡ JS åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </section>

                <!-- ç¤¾äº¤åª’ä½“ -->
                <section id="social" class="bg-white rounded-lg shadow-md p-6 mb-6 category-section" data-category="social">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4 pb-2 border-b-2 border-blue-500">ç¤¾äº¤åª’ä½“</h2>
                    <div id="social-links" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
                        <!-- ç½‘ç«™é“¾æ¥å°†é€šè¿‡ JS åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </section>

                <!-- è§†é¢‘ç½‘ç«™ -->
                <section id="video" class="bg-white rounded-lg shadow-md p-6 mb-6 category-section" data-category="video">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4 pb-2 border-b-2 border-blue-500">è§†é¢‘ç½‘ç«™</h2>
                    <div id="video-links" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
                        <!-- ç½‘ç«™é“¾æ¥å°†é€šè¿‡ JS åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </section>

                <!-- è´­ç‰©ç½‘ç«™ -->
                <section id="shopping" class="bg-white rounded-lg shadow-md p-6 mb-6 category-section" data-category="shopping">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4 pb-2 border-b-2 border-blue-500">è´­ç‰©ç½‘ç«™</h2>
                    <div id="shopping-links" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
                        <!-- ç½‘ç«™é“¾æ¥å°†é€šè¿‡ JS åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </section>

                <!-- å¼€å‘å·¥å…· -->
                <section id="dev" class="bg-white rounded-lg shadow-md p-6 mb-6 category-section" data-category="dev">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4 pb-2 border-b-2 border-blue-500">å¼€å‘å·¥å…·</h2>
                    <div id="dev-links" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
                        <!-- ç½‘ç«™é“¾æ¥å°†é€šè¿‡ JS åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </section>
                </div>
            </div>
        </main>
    </div>

    <script>
        // ========== API é…ç½® ==========
        // éƒ¨ç½²æ—¶è¯·ä¿®æ”¹ä¸ºä½ çš„å®é™… API åœ°å€
        const API_BASE_URL = window.location.origin + '/api';  // è‡ªåŠ¨æ£€æµ‹ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®ä¸º 'https://yourdomain.com/api'

        // ========== DOM å…ƒç´  ==========
        const menuBtn = document.getElementById('menuBtn');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const header = document.getElementById('header');
        const modal = document.getElementById('modal');
        const addSiteBtn = document.getElementById('addSiteBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const siteForm = document.getElementById('siteForm');
        const modalTitle = document.getElementById('modalTitle');
        const settingsBtn = document.getElementById('settingsBtn');
        const settingsModal = document.getElementById('settingsModal');
        const editModeIndicator = document.getElementById('editModeIndicator');

        let lastScrollTop = 0;
        let scrollTimeout;
        let editingIndex = null;
        let isEditMode = false;
        let currentSearchTerm = '';
        let sitesCache = null;  // ç¼“å­˜ç½‘ç«™æ•°æ®

        // Favicon API é…ç½®ï¼ˆæ”¯æŒå¤šä¸ªå¤‡é€‰ï¼‰
        const faviconAPIs = [
            (domain) => `https://www.faviconextractor.com/favicon/${domain}?larger=true`,
            (domain) => `https://www.google.com/s2/favicons?domain=${domain}&sz=64`,
            (domain) => `https://api.faviconkit.com/${domain}/64`,
            (domain) => `https://${domain}/favicon.ico`
        ];

        // ä»URLæå–åŸŸå
        function extractDomain(url) {
            try {
                const urlObj = new URL(url);
                return urlObj.hostname.replace('www.', '');
            } catch (e) {
                return '';
            }
        }

        // è·å– Favicon URL
        function getFaviconUrl(url, apiIndex = 0) {
            const domain = extractDomain(url);
            if (!domain || apiIndex >= faviconAPIs.length) {
                return null;
            }
            return faviconAPIs[apiIndex](domain);
        }

        // ç”Ÿæˆå›¾æ ‡ HTMLï¼ˆå¸¦æœ‰é”™è¯¯å¤„ç†ï¼‰
        function generateFaviconHTML(url, siteName) {
            const domain = extractDomain(url);
            const faviconUrl = getFaviconUrl(url, 0);

            if (!faviconUrl) {
                return `<div class="favicon-fallback w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-sm flex-shrink-0">${siteName.charAt(0).toUpperCase()}</div>`;
            }

            return `
                <img
                    src="${faviconUrl}"
                    alt="${siteName}"
                    class="favicon-img w-8 h-8 rounded-lg object-cover flex-shrink-0"
                    onerror="this.onerror=null; handleFaviconError(this, '${url}', '${siteName.replace(/'/g, "\\'")}', 1);"
                    loading="lazy"
                >
            `;
        }

        // å¤„ç† Favicon åŠ è½½å¤±è´¥
        window.handleFaviconError = function(img, url, siteName, apiIndex) {
            const nextUrl = getFaviconUrl(url, apiIndex);

            if (nextUrl) {
                // å°è¯•ä¸‹ä¸€ä¸ª API
                img.onerror = function() {
                    handleFaviconError(this, url, siteName, apiIndex + 1);
                };
                img.src = nextUrl;
            } else {
                // æ‰€æœ‰ API éƒ½å¤±è´¥ï¼Œæ˜¾ç¤ºé»˜è®¤å›¾æ ‡
                const fallback = document.createElement('div');
                fallback.className = 'favicon-fallback w-8 h-8 bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-sm flex-shrink-0';
                fallback.textContent = siteName.charAt(0).toUpperCase();
                img.parentNode.replaceChild(fallback, img);
            }
        };

        // ========== API è¯·æ±‚å‡½æ•° ==========

        // é€šç”¨ API è¯·æ±‚å‡½æ•°
        async function apiRequest(endpoint, method = 'GET', data = null) {
            try {
                const options = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json'
                    }
                };

                if (data && method !== 'GET') {
                    options.body = JSON.stringify(data);
                }

                const response = await fetch(API_BASE_URL + endpoint, options);
                const result = await response.json();

                return result;
            } catch (error) {
                console.error('APIè¯·æ±‚å¤±è´¥:', error);
                // å¦‚æœ API ä¸å¯ç”¨ï¼Œå›é€€åˆ° localStorage
                return { success: false, message: 'è¿æ¥æœåŠ¡å™¨å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°ç¼“å­˜', error: error.message };
            }
        }

        // ä» API æˆ– localStorage è¯»å–æ•°æ®
        async function loadSites() {
            // é¦–å…ˆå°è¯•ä» API åŠ è½½
            const result = await apiRequest('/sites.php');

            if (result.success && result.data) {
                sitesCache = result.data;
                // åŒæ—¶ä¿å­˜åˆ° localStorage ä½œä¸ºå¤‡ä»½
                localStorage.setItem('navSites', JSON.stringify(result.data));
                return result.data;
            } else {
                // API å¤±è´¥ï¼Œä» localStorage è¯»å–
                const stored = localStorage.getItem('navSites');
                if (stored) {
                    sitesCache = JSON.parse(stored);
                    return sitesCache;
                }
                // å¦‚æœ localStorage ä¹Ÿæ²¡æœ‰ï¼Œè¿”å›é»˜è®¤æ•°æ®
                return defaultSites;
            }
        }

        // ä¿å­˜åˆ° API
        async function saveSite(action, siteData) {
            let method, endpoint, data;

            switch (action) {
                case 'add':
                    method = 'POST';
                    endpoint = '/sites.php';
                    data = siteData;
                    break;
                case 'update':
                    method = 'PUT';
                    endpoint = '/sites.php';
                    data = siteData;
                    break;
                case 'delete':
                    method = 'DELETE';
                    endpoint = '/sites.php';
                    data = { id: siteData.id };
                    break;
            }

            const result = await apiRequest(endpoint, method, data);

            if (!result.success) {
                alert('æ“ä½œå¤±è´¥: ' + result.message);
                return false;
            }

            // åˆ·æ–°ç¼“å­˜
            await loadSites();
            return true;
        }

        // éªŒè¯å¯†ç 
        async function verifyPassword(password) {
            const result = await apiRequest('/auth.php?action=verify', 'POST', { password });

            if (result.success) {
                return true;
            } else {
                // API ä¸å¯ç”¨æ—¶ï¼Œä½¿ç”¨ localStorage çš„å¯†ç 
                const localPassword = localStorage.getItem('navPassword') || DEFAULT_PASSWORD;
                return password === localPassword;
            }
        }

        // ä¿®æ”¹å¯†ç 
        async function changePassword(currentPassword, newPassword) {
            const result = await apiRequest('/auth.php?action=change', 'POST', {
                currentPassword,
                newPassword
            });

            if (result.success) {
                // åŒæ—¶æ›´æ–° localStorage
                localStorage.setItem('navPassword', newPassword);
                return { success: true };
            } else {
                // API ä¸å¯ç”¨æ—¶ï¼Œä½¿ç”¨ localStorage
                const localPassword = localStorage.getItem('navPassword') || DEFAULT_PASSWORD;
                if (currentPassword === localPassword) {
                    localStorage.setItem('navPassword', newPassword);
                    return { success: true };
                }
                return { success: false, message: 'å½“å‰å¯†ç é”™è¯¯' };
            }
        }

        // åˆ†ç±»åç§°æ˜ å°„ï¼ˆç”¨äºæœç´¢ç»“æœæ˜¾ç¤ºï¼‰
        const categoryNames = {
            search: 'æœç´¢å¼•æ“',
            social: 'ç¤¾äº¤åª’ä½“',
            video: 'è§†é¢‘ç½‘ç«™',
            shopping: 'è´­ç‰©ç½‘ç«™',
            dev: 'å¼€å‘å·¥å…·'
        };

        // é»˜è®¤å¯†ç ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
        const DEFAULT_PASSWORD = 'admin123';

        // é»˜è®¤ç½‘ç«™æ•°æ®ï¼ˆä»…åœ¨ API å’Œ localStorage éƒ½ä¸å¯ç”¨æ—¶ä½¿ç”¨ï¼‰
        const defaultSites = {
            search: [
                { name: 'ç™¾åº¦', url: 'https://www.baidu.com' },
                { name: 'è°·æ­Œ', url: 'https://www.google.com' },
                { name: 'å¿…åº”', url: 'https://www.bing.com' }
            ],
            social: [
                { name: 'å¾®åš', url: 'https://www.weibo.com' },
                { name: 'çŸ¥ä¹', url: 'https://www.zhihu.com' },
                { name: 'å“”å“©å“”å“©', url: 'https://www.bilibili.com' }
            ],
            video: [
                { name: 'YouTube', url: 'https://www.youtube.com' },
                { name: 'Bç«™', url: 'https://www.bilibili.com' },
                { name: 'è…¾è®¯è§†é¢‘', url: 'https://v.qq.com' }
            ],
            shopping: [
                { name: 'æ·˜å®', url: 'https://www.taobao.com' },
                { name: 'äº¬ä¸œ', url: 'https://www.jd.com' },
                { name: 'äºšé©¬é€Š', url: 'https://www.amazon.cn' }
            ],
            dev: [
                { name: 'GitHub', url: 'https://github.com' },
                { name: 'Stack Overflow', url: 'https://stackoverflow.com' },
                { name: 'èœé¸Ÿæ•™ç¨‹', url: 'https://www.runoob.com' }
            ]
        };

        // æ›´æ–°ç¼–è¾‘æ¨¡å¼UI
        async function updateEditModeUI() {
            if (isEditMode) {
                addSiteBtn.classList.remove('hidden');
                editModeIndicator.classList.remove('hidden');
            } else {
                addSiteBtn.classList.add('hidden');
                editModeIndicator.classList.add('hidden');
            }
            await renderSites();
        }

        // æœç´¢åŠŸèƒ½
        async function searchSites(searchTerm) {
            currentSearchTerm = searchTerm.toLowerCase().trim();

            if (currentSearchTerm === '') {
                clearSearchState();
                return;
            }

            // ä»ç¼“å­˜æˆ–é‡æ–°åŠ è½½æ•°æ®
            const sites = sitesCache || await loadSites();
            const results = {};
            let totalResults = 0;

            // æœç´¢é€»è¾‘
            Object.keys(sites).forEach(category => {
                const filtered = sites[category].filter(site => {
                    return site.name.toLowerCase().includes(currentSearchTerm) ||
                           site.url.toLowerCase().includes(currentSearchTerm);
                });

                if (filtered.length > 0) {
                    results[category] = filtered;
                    totalResults += filtered.length;
                }
            });

            displaySearchResults(results, totalResults);
        }

        // æ˜¾ç¤ºæœç´¢ç»“æœ
        function displaySearchResults(results, totalResults) {
            const categoriesContainer = document.getElementById('categoriesContainer');
            const noResults = document.getElementById('noResults');
            const searchStats = document.getElementById('searchStats');
            const clearSearch = document.getElementById('clearSearch');

            clearSearch.classList.remove('hidden');

            if (totalResults === 0) {
                categoriesContainer.classList.add('hidden');
                noResults.classList.remove('hidden');
                searchStats.classList.add('hidden');
            } else {
                categoriesContainer.classList.remove('hidden');
                noResults.classList.add('hidden');
                searchStats.classList.remove('hidden');
                searchStats.textContent = `æ‰¾åˆ° ${totalResults} ä¸ªç›¸å…³ç½‘ç«™`;

                // æ¸²æŸ“æœç´¢ç»“æœ
                Object.keys(categoryNames).forEach(category => {
                    const section = document.getElementById(category);
                    const container = document.getElementById(`${category}-links`);

                    if (results[category] && results[category].length > 0) {
                        section.classList.remove('hidden');
                        container.innerHTML = '';

                        results[category].forEach((site, index) => {
                            const linkDiv = document.createElement('div');
                            linkDiv.className = 'relative group';

                            // é«˜äº®åŒ¹é…çš„å…³é”®è¯
                            const highlightedName = highlightText(site.name, currentSearchTerm);
                            const faviconHTML = generateFaviconHTML(site.url, site.name);

                            linkDiv.innerHTML = `
                                <a href="${site.url}" target="_blank" class="site-link flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-blue-500 hover:text-white hover:-translate-y-1 transition-all duration-300">
                                    ${faviconHTML}
                                    <span class="flex-1 truncate">${highlightedName}</span>
                                </a>
                                ${isEditMode ? `
                                <div class="absolute top-2 right-2 hidden group-hover:flex gap-1">
                                    <button onclick="editSiteFromSearch('${category}', '${site.name.replace(/'/g, "\\'")}', '${site.url}')" class="p-1.5 bg-white text-blue-600 rounded shadow-md hover:bg-blue-50 transition">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                        </svg>
                                    </button>
                                    <button onclick="deleteSiteFromSearch('${category}', '${site.name.replace(/'/g, "\\'")}')" class="p-1.5 bg-white text-red-600 rounded shadow-md hover:bg-red-50 transition">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                        </svg>
                                    </button>
                                </div>
                                ` : ''}
                            `;

                            container.appendChild(linkDiv);
                        });
                    } else {
                        section.classList.add('hidden');
                    }
                });
            }
        }

        // é«˜äº®æ–‡æœ¬
        function highlightText(text, searchTerm) {
            if (!searchTerm) return text;
            const regex = new RegExp(`(${searchTerm})`, 'gi');
            return text.replace(regex, '<mark class="bg-yellow-200 px-1 rounded">$1</mark>');
        }

        // æœç´¢æ¡†äº‹ä»¶ç›‘å¬
        const searchInput = document.getElementById('searchInput');
        const clearSearchBtn = document.getElementById('clearSearch');

        searchInput.addEventListener('input', (e) => {
            searchSites(e.target.value);
        });

        clearSearchBtn.addEventListener('click', () => {
            clearSearchState();
        });

        // ä»æœç´¢ç»“æœç¼–è¾‘ç½‘ç«™
        window.editSiteFromSearch = function(category, name, url) {
            if (!isEditMode) return;

            const sites = loadSites();
            const index = sites[category].findIndex(site => site.name === name && site.url === url);

            if (index !== -1) {
                editSite(category, index);
            }
        };

        // ä»æœç´¢ç»“æœåˆ é™¤ç½‘ç«™
        window.deleteSiteFromSearch = async function(category, name) {
            if (!isEditMode) return;

            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç½‘ç«™å—ï¼Ÿ')) {
                const sites = sitesCache || await loadSites();
                const site = sites[category].find(s => s.name === name);

                if (site && site.id) {
                    const success = await saveSite('delete', { id: site.id });

                    if (success) {
                        // é‡æ–°æœç´¢
                        const updatedSites = sitesCache || await loadSites();
                        let totalResults = 0;

                        Object.keys(updatedSites).forEach(cat => {
                            const filtered = updatedSites[cat].filter(s => {
                                return s.name.toLowerCase().includes(currentSearchTerm) ||
                                       s.url.toLowerCase().includes(currentSearchTerm);
                            });
                            totalResults += filtered.length;
                        });

                        if (totalResults > 0) {
                            searchSites(currentSearchTerm);
                        } else {
                            clearSearchState();
                        }
                    }
                }
            }
        };

        // æ¸²æŸ“ç½‘ç«™é“¾æ¥
        async function renderSites() {
            const sites = sitesCache || await loadSites();

            // æ˜¾ç¤ºæ‰€æœ‰åˆ†ç±»
            document.querySelectorAll('.category-section').forEach(section => {
                section.classList.remove('hidden');
            });

            Object.keys(sites).forEach(category => {
                const container = document.getElementById(`${category}-links`);
                container.innerHTML = '';

                sites[category].forEach((site, index) => {
                    const linkDiv = document.createElement('div');
                    linkDiv.className = 'relative group';

                    const faviconHTML = generateFaviconHTML(site.url, site.name);

                    linkDiv.innerHTML = `
                        <a href="${site.url}" target="_blank" class="site-link flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-blue-500 hover:text-white hover:-translate-y-1 transition-all duration-300">
                            ${faviconHTML}
                            <span class="flex-1 truncate">${site.name}</span>
                        </a>
                        ${isEditMode ? `
                        <div class="absolute top-2 right-2 hidden group-hover:flex gap-1">
                            <button onclick="editSite('${category}', ${index})" class="p-1.5 bg-white text-blue-600 rounded shadow-md hover:bg-blue-50 transition">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                </svg>
                            </button>
                            <button onclick="deleteSite('${category}', ${index})" class="p-1.5 bg-white text-red-600 rounded shadow-md hover:bg-red-50 transition">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                        ` : ''}
                    `;

                    container.appendChild(linkDiv);
                });
            });
        }

        // æ¸…ç©ºæœç´¢çŠ¶æ€
        async function clearSearchState() {
            currentSearchTerm = '';
            searchInput.value = '';
            document.getElementById('searchStats').classList.add('hidden');
            document.getElementById('noResults').classList.add('hidden');
            document.getElementById('categoriesContainer').classList.remove('hidden');
            document.getElementById('clearSearch').classList.add('hidden');
            await renderSites();
        }

        // æ‰“å¼€è®¾ç½®æ¨¡æ€æ¡†
        settingsBtn.addEventListener('click', () => {
            settingsModal.classList.remove('hidden');
            if (isEditMode) {
                document.getElementById('passwordAuth').classList.add('hidden');
                document.getElementById('settingsPanel').classList.remove('hidden');
            } else {
                document.getElementById('passwordAuth').classList.remove('hidden');
                document.getElementById('settingsPanel').classList.add('hidden');
                document.getElementById('authPassword').value = '';
                document.getElementById('authError').classList.add('hidden');
            }
            document.getElementById('changePasswordPanel').classList.add('hidden');
        });

        // å…³é—­è®¾ç½®æ¨¡æ€æ¡†
        document.getElementById('cancelSettingsBtn').addEventListener('click', () => {
            settingsModal.classList.add('hidden');
        });

        settingsModal.addEventListener('click', (e) => {
            if (e.target === settingsModal) {
                settingsModal.classList.add('hidden');
            }
        });

        // éªŒè¯å¯†ç 
        document.getElementById('verifyPasswordBtn').addEventListener('click', async () => {
            const password = document.getElementById('authPassword').value;
            const isValid = await verifyPassword(password);

            if (isValid) {
                isEditMode = true;
                await updateEditModeUI();
                document.getElementById('passwordAuth').classList.add('hidden');
                document.getElementById('settingsPanel').classList.remove('hidden');
                document.getElementById('authError').classList.add('hidden');
            } else {
                document.getElementById('authError').classList.remove('hidden');
            }
        });

        // å›è½¦é”®éªŒè¯å¯†ç 
        document.getElementById('authPassword').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('verifyPasswordBtn').click();
            }
        });

        // é€€å‡ºç¼–è¾‘æ¨¡å¼
        document.getElementById('exitEditModeBtn').addEventListener('click', async () => {
            isEditMode = false;
            await updateEditModeUI();
            settingsModal.classList.add('hidden');
        });

        // æ‰“å¼€ä¿®æ”¹å¯†ç é¢æ¿
        document.getElementById('changePasswordBtn').addEventListener('click', () => {
            document.getElementById('settingsPanel').classList.add('hidden');
            document.getElementById('changePasswordPanel').classList.remove('hidden');
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            document.getElementById('passwordError').classList.add('hidden');
        });

        // è¿”å›è®¾ç½®é¢æ¿
        document.getElementById('backToSettingsBtn').addEventListener('click', () => {
            document.getElementById('changePasswordPanel').classList.add('hidden');
            document.getElementById('settingsPanel').classList.remove('hidden');
        });

        document.getElementById('cancelChangePasswordBtn').addEventListener('click', () => {
            document.getElementById('changePasswordPanel').classList.add('hidden');
            document.getElementById('settingsPanel').classList.remove('hidden');
        });

        // ä¿å­˜æ–°å¯†ç 
        document.getElementById('savePasswordBtn').addEventListener('click', async () => {
            const current = document.getElementById('currentPassword').value;
            const newPwd = document.getElementById('newPassword').value;
            const confirm = document.getElementById('confirmPassword').value;
            const errorEl = document.getElementById('passwordError');

            if (newPwd.length < 6) {
                errorEl.textContent = 'æ–°å¯†ç è‡³å°‘éœ€è¦6ä¸ªå­—ç¬¦';
                errorEl.classList.remove('hidden');
                return;
            }

            if (newPwd !== confirm) {
                errorEl.textContent = 'ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´';
                errorEl.classList.remove('hidden');
                return;
            }

            const result = await changePassword(current, newPwd);

            if (result.success) {
                errorEl.classList.add('hidden');
                alert('å¯†ç ä¿®æ”¹æˆåŠŸï¼');
                document.getElementById('changePasswordPanel').classList.add('hidden');
                document.getElementById('settingsPanel').classList.remove('hidden');
            } else {
                errorEl.textContent = result.message || 'ä¿®æ”¹å¤±è´¥';
                errorEl.classList.remove('hidden');
            }
        });

        // æ‰“å¼€æ·»åŠ æ¨¡æ€æ¡†
        addSiteBtn.addEventListener('click', () => {
            if (!isEditMode) {
                alert('è¯·å…ˆåœ¨è®¾ç½®ä¸­å¯ç”¨ç¼–è¾‘æ¨¡å¼');
                return;
            }
            modalTitle.textContent = 'æ·»åŠ æ–°ç½‘ç«™';
            siteForm.reset();
            editingIndex = null;
            modal.classList.remove('hidden');
        });

        // å…³é—­æ¨¡æ€æ¡†
        cancelBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.add('hidden');
            }
        });

        // æäº¤è¡¨å•
        siteForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            const name = document.getElementById('siteName').value;
            const url = document.getElementById('siteUrl').value;
            const category = document.getElementById('siteCategory').value;

            const sites = sitesCache || await loadSites();
            let success = false;

            if (editingIndex !== null) {
                // ç¼–è¾‘æ¨¡å¼
                const [editCategory, editIdx] = editingIndex.split('-');
                const site = sites[editCategory][editIdx];

                if (site && site.id) {
                    success = await saveSite('update', {
                        id: site.id,
                        name,
                        url,
                        category
                    });
                }
            } else {
                // æ·»åŠ æ¨¡å¼
                success = await saveSite('add', { name, url, category });
            }

            if (success) {
                modal.classList.add('hidden');

                // å¦‚æœæ­£åœ¨æœç´¢ï¼Œé‡æ–°æ‰§è¡Œæœç´¢
                if (currentSearchTerm) {
                    searchInput.value = currentSearchTerm;
                    await searchSites(currentSearchTerm);
                } else {
                    await renderSites();
                }
            }
        });

        // ç¼–è¾‘ç½‘ç«™
        window.editSite = async function(category, index) {
            if (!isEditMode) return;

            const sites = sitesCache || await loadSites();
            const site = sites[category][index];

            modalTitle.textContent = 'ç¼–è¾‘ç½‘ç«™';
            document.getElementById('siteName').value = site.name;
            document.getElementById('siteUrl').value = site.url;
            document.getElementById('siteCategory').value = category;

            editingIndex = `${category}-${index}`;
            modal.classList.remove('hidden');
        };

        // åˆ é™¤ç½‘ç«™
        window.deleteSite = async function(category, index) {
            if (!isEditMode) return;

            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç½‘ç«™å—ï¼Ÿ')) {
                const sites = sitesCache || await loadSites();
                const site = sites[category][index];

                if (site && site.id) {
                    const success = await saveSite('delete', { id: site.id });

                    if (success) {
                        // å¦‚æœæ­£åœ¨æœç´¢ï¼Œé‡æ–°æ‰§è¡Œæœç´¢å¹¶æ£€æŸ¥ç»“æœ
                        if (currentSearchTerm) {
                            const updatedSites = sitesCache || await loadSites();
                            let totalResults = 0;

                            Object.keys(updatedSites).forEach(cat => {
                                const filtered = updatedSites[cat].filter(s => {
                                    return s.name.toLowerCase().includes(currentSearchTerm) ||
                                           s.url.toLowerCase().includes(currentSearchTerm);
                                });
                                totalResults += filtered.length;
                            });

                            if (totalResults > 0) {
                                await searchSites(currentSearchTerm);
                            } else {
                                await clearSearchState();
                            }
                        } else {
                            await renderSites();
                        }
                    }
                }
            }
        };

        // åˆ‡æ¢ä¾§è¾¹æ 
        function toggleSidebar() {
            sidebar.classList.toggle('-translate-x-full');
            overlay.classList.toggle('hidden');
        }

        // ç‚¹å‡»èœå•æŒ‰é’®
        menuBtn.addEventListener('click', toggleSidebar);

        // ç‚¹å‡»é®ç½©å±‚å…³é—­ä¾§è¾¹æ 
        overlay.addEventListener('click', toggleSidebar);

        // ç‚¹å‡»ä¾§è¾¹æ é“¾æ¥ååœ¨ç§»åŠ¨ç«¯è‡ªåŠ¨å…³é—­
        document.querySelectorAll('#sidebar a').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth < 1024) {
                    toggleSidebar();
                }
            });
        });

        // ä¾§è¾¹æ é“¾æ¥æ¿€æ´»çŠ¶æ€é«˜äº®
        function updateActiveSidebarLink() {
            const sections = document.querySelectorAll('.category-section');
            const sidebarLinks = document.querySelectorAll('#sidebar nav a');

            let currentSection = '';

            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                const sectionHeight = section.offsetHeight;
                const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;

                if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                    currentSection = section.getAttribute('id');
                }
            });

            sidebarLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${currentSection}`) {
                    link.classList.add('active');
                }
            });
        }

        // ç›‘å¬æ»šåŠ¨äº‹ä»¶æ›´æ–°æ¿€æ´»é“¾æ¥
        window.addEventListener('scroll', updateActiveSidebarLink);

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ¿€æ´»é“¾æ¥
        document.addEventListener('DOMContentLoaded', updateActiveSidebarLink);

        // æ»šåŠ¨æ—¶éšè—/æ˜¾ç¤ºé¡¶éƒ¨å¯¼èˆªæ 
        window.addEventListener('scroll', () => {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

            // æ¸…é™¤ä¹‹å‰çš„å»¶æ—¶
            clearTimeout(scrollTimeout);

            if (scrollTop > lastScrollTop && scrollTop > 100) {
                // å‘ä¸‹æ»šåŠ¨ä¸”è¶…è¿‡100px - éšè—å¯¼èˆªæ 
                header.style.transform = 'translateY(-100%)';
                // åŒæ—¶è®©ä¾§è¾¹æ å‘ä¸Šæ‰©å±•
                sidebar.classList.add('header-hidden');
            } else {
                // å‘ä¸Šæ»šåŠ¨æˆ–åœ¨é¡¶éƒ¨ - æ˜¾ç¤ºå¯¼èˆªæ 
                header.style.transform = 'translateY(0)';
                // æ¢å¤ä¾§è¾¹æ æ­£å¸¸ä½ç½®
                sidebar.classList.remove('header-hidden');
            }

            // åœæ­¢æ»šåŠ¨åï¼Œå¦‚æœåœ¨é¡¶éƒ¨é™„è¿‘åˆ™æ˜¾ç¤ºå¯¼èˆªæ 
            scrollTimeout = setTimeout(() => {
                if (scrollTop < 100) {
                    header.style.transform = 'translateY(0)';
                    sidebar.classList.remove('header-hidden');
                }
            }, 150);

            lastScrollTop = scrollTop;
        });

        // é¡µé¢åŠ è½½æ—¶æ¸²æŸ“ç½‘ç«™
        (async function init() {
            await renderSites();
            updateEditModeUI();
        })();
    </script>
</body>
</html>